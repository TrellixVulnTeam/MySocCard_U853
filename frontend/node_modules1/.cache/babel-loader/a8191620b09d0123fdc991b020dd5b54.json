{"ast":null,"code":"var _jsxFileName = \"/home/gusmadvol/Developer/wwwcie/payment/frontend/src/context/PurchaseContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect } from \"react\";\nimport { useContext } from \"react\";\nimport ApiContext from \"../context/ApiContext\";\n/**purchases: purchases,\n * \n    GET: GET,\n\n    POST: POST,\n\n    PUT: PUT,\n\n    DELETE: DELETE */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PurchaseContext = /*#__PURE__*/createContext();\nexport default PurchaseContext;\nexport const PurchaseProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    ApiRequest\n  } = useContext(ApiContext);\n  const [purchases, setPurchases] = useState([]);\n\n  async function GET() {\n    setPurchases([]);\n    const res = await ApiRequest(\"/api/purchase/\");\n    const data = await res.json();\n    setPurchases(data);\n  }\n\n  async function POST(purchase) {\n    const res = await ApiRequest(\"/api/purchase/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify(purchase)\n    });\n    const data = await res.json();\n    setPurchases([...purchases, data]);\n  }\n\n  async function PUT(purchase) {\n    const res = await ApiRequest(`/api/purchase/${purchase.id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify(purchase)\n    });\n    const data = await res.json();\n    setPurchases(purchases.map(purchase_from_map => purchase.id === purchase_from_map.id ? data : purchase_from_map));\n  }\n\n  async function DELETE(purchase) {\n    await ApiRequest(`/api/purchase/${purchase.id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    });\n  }\n\n  useEffect(() => {\n    async function get() {\n      await GET();\n    }\n\n    get();\n  }, []);\n  const data = {\n    purchases: purchases,\n    GET: GET,\n    POST: POST,\n    PUT: PUT,\n    DELETE: DELETE\n  };\n  return /*#__PURE__*/_jsxDEV(PurchaseContext.Provider, {\n    value: data,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PurchaseProvider, \"ZCq79Oc9Y8W5sYHF74p/VBQ6f44=\");\n\n_c = PurchaseProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"PurchaseProvider\");","map":{"version":3,"names":["createContext","useEffect","useContext","ApiContext","PurchaseContext","PurchaseProvider","children","ApiRequest","purchases","setPurchases","useState","GET","res","data","json","POST","purchase","method","headers","body","JSON","stringify","PUT","id","map","purchase_from_map","DELETE","get"],"sources":["/home/gusmadvol/Developer/wwwcie/payment/frontend/src/context/PurchaseContext.js"],"sourcesContent":["import { createContext, useEffect } from \"react\";\nimport { useContext } from \"react\";\nimport ApiContext from \"../context/ApiContext\";\n/**purchases: purchases,\n * \n    GET: GET,\n\n    POST: POST,\n\n    PUT: PUT,\n\n    DELETE: DELETE */\nconst PurchaseContext = createContext();\nexport default PurchaseContext;\n\nexport const PurchaseProvider = ({ children }) => {\n  const { ApiRequest } = useContext(ApiContext);\n  const [purchases, setPurchases] = useState([]);\n  async function GET() {\n    setPurchases([]);\n    const res = await ApiRequest(\"/api/purchase/\");\n    const data = await res.json();\n    setPurchases(data);\n  }\n  async function POST(purchase) {\n    const res = await ApiRequest(\"/api/purchase/\", {\n      method: \"POST\",\n      headers: { \"Content-type\": \"application/json\" },\n      body: JSON.stringify(purchase),\n    });\n    const data = await res.json();\n    setPurchases([...purchases, data]);\n  }\n  async function PUT(purchase) {\n    const res = await ApiRequest(`/api/purchase/${purchase.id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n      body: JSON.stringify(purchase),\n    });\n    const data = await res.json();\n    setPurchases(\n      purchases.map((purchase_from_map) =>\n        purchase.id === purchase_from_map.id ? data : purchase_from_map\n      )\n    );\n  }\n  async function DELETE(purchase) {\n    await ApiRequest(`/api/purchase/${purchase.id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n    });\n  }\n\n  useEffect(() => {\n    async function get() {await GET();}\n    get()\n  }, []);\n  const data = {\n    purchases: purchases,\n    GET: GET,\n    POST: POST,\n    PUT: PUT,\n    DELETE: DELETE,\n  };\n  return (\n    <PurchaseContext.Provider value={data}>{children}</PurchaseContext.Provider>\n  );\n};\n"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,eAAe,gBAAGJ,aAAa,EAArC;AACA,eAAeI,eAAf;AAEA,OAAO,MAAMC,gBAAgB,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAChD,MAAM;IAAEC;EAAF,IAAiBL,UAAU,CAACC,UAAD,CAAjC;EACA,MAAM,CAACK,SAAD,EAAYC,YAAZ,IAA4BC,QAAQ,CAAC,EAAD,CAA1C;;EACA,eAAeC,GAAf,GAAqB;IACnBF,YAAY,CAAC,EAAD,CAAZ;IACA,MAAMG,GAAG,GAAG,MAAML,UAAU,CAAC,gBAAD,CAA5B;IACA,MAAMM,IAAI,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAAnB;IACAL,YAAY,CAACI,IAAD,CAAZ;EACD;;EACD,eAAeE,IAAf,CAAoBC,QAApB,EAA8B;IAC5B,MAAMJ,GAAG,GAAG,MAAML,UAAU,CAAC,gBAAD,EAAmB;MAC7CU,MAAM,EAAE,MADqC;MAE7CC,OAAO,EAAE;QAAE,gBAAgB;MAAlB,CAFoC;MAG7CC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,QAAf;IAHuC,CAAnB,CAA5B;IAKA,MAAMH,IAAI,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAAnB;IACAL,YAAY,CAAC,CAAC,GAAGD,SAAJ,EAAeK,IAAf,CAAD,CAAZ;EACD;;EACD,eAAeS,GAAf,CAAmBN,QAAnB,EAA6B;IAC3B,MAAMJ,GAAG,GAAG,MAAML,UAAU,CAAE,iBAAgBS,QAAQ,CAACO,EAAG,EAA9B,EAAiC;MAC3DN,MAAM,EAAE,KADmD;MAE3DC,OAAO,EAAE;QACP,gBAAgB;MADT,CAFkD;MAK3DC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,QAAf;IALqD,CAAjC,CAA5B;IAOA,MAAMH,IAAI,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAAnB;IACAL,YAAY,CACVD,SAAS,CAACgB,GAAV,CAAeC,iBAAD,IACZT,QAAQ,CAACO,EAAT,KAAgBE,iBAAiB,CAACF,EAAlC,GAAuCV,IAAvC,GAA8CY,iBADhD,CADU,CAAZ;EAKD;;EACD,eAAeC,MAAf,CAAsBV,QAAtB,EAAgC;IAC9B,MAAMT,UAAU,CAAE,iBAAgBS,QAAQ,CAACO,EAAG,EAA9B,EAAiC;MAC/CN,MAAM,EAAE,QADuC;MAE/CC,OAAO,EAAE;QACP,gBAAgB;MADT;IAFsC,CAAjC,CAAhB;EAMD;;EAEDjB,SAAS,CAAC,MAAM;IACd,eAAe0B,GAAf,GAAqB;MAAC,MAAMhB,GAAG,EAAT;IAAa;;IACnCgB,GAAG;EACJ,CAHQ,EAGN,EAHM,CAAT;EAIA,MAAMd,IAAI,GAAG;IACXL,SAAS,EAAEA,SADA;IAEXG,GAAG,EAAEA,GAFM;IAGXI,IAAI,EAAEA,IAHK;IAIXO,GAAG,EAAEA,GAJM;IAKXI,MAAM,EAAEA;EALG,CAAb;EAOA,oBACE,QAAC,eAAD,CAAiB,QAAjB;IAA0B,KAAK,EAAEb,IAAjC;IAAA,UAAwCP;EAAxC;IAAA;IAAA;IAAA;EAAA,QADF;AAGD,CAxDM;;GAAMD,gB;;KAAAA,gB"},"metadata":{},"sourceType":"module"}