{"ast":null,"code":"var _jsxFileName = \"/home/gusmadvol/Developer/wwwcie/payment/frontend/src/context/CartContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useContext } from \"react\";\nimport PurchaseContext from \"../context/PurchaseContext\";\n/**cart: cart,\n * \n    add_to_cart: add_to_cart,\n\n    remove_from_cart: remove_from_cart,\n\n    buy_cart: buy_cart,\n     */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport default CartContext;\nexport const CartProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    POST\n  } = useContext(PurchaseContext);\n  const [cart, setCart] = useState([]);\n\n  function add_to_cart(object) {\n    setCart([...cart, object]);\n  }\n\n  function remove_from_cart(object) {\n    if (cart.length <= 1) {\n      setCart([]);\n    } else {\n      setCart([cart.map(item => item.id !== object.id && item)]);\n    }\n  }\n\n  function buy_cart() {\n    const counts = {};\n\n    for (const item of cart) {\n      counts[item.id] = counts[item.id] ? counts[item.id] + 1 : 1;\n    }\n\n    const orders = Object.entries(counts).map(_ref2 => {\n      let [key, value] = _ref2;\n      return {\n        quantity: value,\n        product: key\n      };\n    });\n    console.log({\n      orders,\n      buyer: 1,\n      payed: false\n    });\n    POST({\n      orders,\n      buyer: 1,\n      payed: false\n    });\n  }\n\n  const data = {\n    cart: cart,\n    add_to_cart: add_to_cart,\n    remove_from_cart: remove_from_cart,\n    buy_cart: buy_cart\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: data,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 10\n  }, this);\n};\n\n_s(CartProvider, \"lcj3N620XP+WeyquB9B0NV+fcpo=\");\n\n_c = CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useContext","PurchaseContext","CartContext","CartProvider","children","POST","cart","setCart","useState","add_to_cart","object","remove_from_cart","length","map","item","id","buy_cart","counts","orders","Object","entries","key","value","quantity","product","console","log","buyer","payed","data"],"sources":["/home/gusmadvol/Developer/wwwcie/payment/frontend/src/context/CartContext.js"],"sourcesContent":["import { createContext, useContext } from \"react\";\nimport PurchaseContext from \"../context/PurchaseContext\";\n\n/**cart: cart,\n * \n    add_to_cart: add_to_cart,\n\n    remove_from_cart: remove_from_cart,\n\n    buy_cart: buy_cart,\n     */\nconst CartContext = createContext();\nexport default CartContext;\n\nexport const CartProvider = ({ children }) => {\n  const { POST } = useContext(PurchaseContext);\n  const [cart, setCart] = useState([]);\n  function add_to_cart(object) {\n    setCart([...cart, object]);\n  }\n  function remove_from_cart(object) {\n    if (cart.length <= 1) {\n      setCart([]);\n    } else {\n      setCart([cart.map((item) => item.id !== object.id && item)]);\n    }\n  }\n  function buy_cart() {\n    const counts = {};\n    for (const item of cart) {\n      counts[item.id] = counts[item.id] ? counts[item.id] + 1 : 1;\n    }\n    const orders = Object.entries(counts).map(([key, value]) => ({\n      quantity: value,\n      product: key,\n    }));\n    console.log({ orders, buyer: 1, payed: false });\n    POST({ orders, buyer: 1, payed: false });\n  }\n\n  const data = {\n    cart: cart,\n    add_to_cart: add_to_cart,\n    remove_from_cart: remove_from_cart,\n    buy_cart: buy_cart,\n  };\n  return <CartContext.Provider value={data}>{children}</CartContext.Provider>;\n};\n"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAA0C,OAA1C;AACA,OAAOC,eAAP,MAA4B,4BAA5B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,WAAW,gBAAGH,aAAa,EAAjC;AACA,eAAeG,WAAf;AAEA,OAAO,MAAMC,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAC5C,MAAM;IAAEC;EAAF,IAAWL,UAAU,CAACC,eAAD,CAA3B;EACA,MAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBC,QAAQ,CAAC,EAAD,CAAhC;;EACA,SAASC,WAAT,CAAqBC,MAArB,EAA6B;IAC3BH,OAAO,CAAC,CAAC,GAAGD,IAAJ,EAAUI,MAAV,CAAD,CAAP;EACD;;EACD,SAASC,gBAAT,CAA0BD,MAA1B,EAAkC;IAChC,IAAIJ,IAAI,CAACM,MAAL,IAAe,CAAnB,EAAsB;MACpBL,OAAO,CAAC,EAAD,CAAP;IACD,CAFD,MAEO;MACLA,OAAO,CAAC,CAACD,IAAI,CAACO,GAAL,CAAUC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYL,MAAM,CAACK,EAAnB,IAAyBD,IAA5C,CAAD,CAAD,CAAP;IACD;EACF;;EACD,SAASE,QAAT,GAAoB;IAClB,MAAMC,MAAM,GAAG,EAAf;;IACA,KAAK,MAAMH,IAAX,IAAmBR,IAAnB,EAAyB;MACvBW,MAAM,CAACH,IAAI,CAACC,EAAN,CAAN,GAAkBE,MAAM,CAACH,IAAI,CAACC,EAAN,CAAN,GAAkBE,MAAM,CAACH,IAAI,CAACC,EAAN,CAAN,GAAkB,CAApC,GAAwC,CAA1D;IACD;;IACD,MAAMG,MAAM,GAAGC,MAAM,CAACC,OAAP,CAAeH,MAAf,EAAuBJ,GAAvB,CAA2B;MAAA,IAAC,CAACQ,GAAD,EAAMC,KAAN,CAAD;MAAA,OAAmB;QAC3DC,QAAQ,EAAED,KADiD;QAE3DE,OAAO,EAAEH;MAFkD,CAAnB;IAAA,CAA3B,CAAf;IAIAI,OAAO,CAACC,GAAR,CAAY;MAAER,MAAF;MAAUS,KAAK,EAAE,CAAjB;MAAoBC,KAAK,EAAE;IAA3B,CAAZ;IACAvB,IAAI,CAAC;MAAEa,MAAF;MAAUS,KAAK,EAAE,CAAjB;MAAoBC,KAAK,EAAE;IAA3B,CAAD,CAAJ;EACD;;EAED,MAAMC,IAAI,GAAG;IACXvB,IAAI,EAAEA,IADK;IAEXG,WAAW,EAAEA,WAFF;IAGXE,gBAAgB,EAAEA,gBAHP;IAIXK,QAAQ,EAAEA;EAJC,CAAb;EAMA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEa,IAA7B;IAAA,UAAoCzB;EAApC;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CAjCM;;GAAMD,Y;;KAAAA,Y"},"metadata":{},"sourceType":"module"}